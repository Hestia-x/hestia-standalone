<html>
<head>
	<title>Asset History</title>
	<style>
		table {
			border-collapse: collapse;
			border: 4px #555555 solid;
		}
		thead, tfoot {
			border: 4px #555555 solid;
		}
		td, th {
			margin: 0px 0px 0px 0px;
			padding: 10px;
			text-align:right;
			border: 1px #555555 solid
		}
		.right_thick {
			border-right-width: 4px;
		}
		.top_thick {
			border-top-width: 4px;
		}		
		.top_medium {
			border-top-width: 2px;
		}
		
	</style>
</head>
<body>
<strong>Data:</strong> $history.fromDate ~ $history.toDate
<br/><br/>
<table>
	<thead>
		<tr>
			<th class="right_thick">Name</th>
			<th>Before</th>
			<th>Change</th>
			<th>Balance</th>
		</tr>
	</thead>
	<tbody>
		#foreach( $accountChangeSummary in $history.balanceChangeSummaryMap.values() )
		<tr>
			<td class="right_thick">$accountChangeSummary.accountName</td>
			<td>$accountChangeSummary.before</td>
			<td>$accountChangeSummary.change</td>
			<td><strong>$accountChangeSummary.balance</strong></td>
		</tr>
		#end
	</tbody>
	<tfoot>
		<tr>
			<td class="right_thick">$history.balanceChangeSummary.accountName</td>
			<td>$history.balanceChangeSummary.before</td>
			<td>$history.balanceChangeSummary.change</td>
			<td><strong>$history.balanceChangeSummary.balance</strong></td>
		</tr>
	</<tfoot>
</table>
<br/><br/>
<table>
	<thead>
		<tr>
			<th class="right_thick">Date</th>
			#if( $history.groupType == "OCCURRENCE" )
			<th class="right_thick">Shop</th>
			#end
			<th>Name</th>
			<th>Change</th>
			<th>Balance</th>
		</tr>
	</thead>
	<tbody>
		#foreach( $groupData in $history.balanceChangeGroupList)
			#foreach( $changeData in $groupData.balanceChangeList )
		<tr>
			#set( $firstDate = false )
			#set( $firstSlip = false )
			#if( $velocityCount == 1 )
				#if( $prevDate != $groupData.date)
				#set( $prevDate = $groupData.date )
				#set( $firstDate = true )
			<td class="right_thick top_thick" rowspan="$dateGroupCountMap.get($groupData.date)">$groupData.date</td>
				#end
				#if( !$firstDate )
					#set($firstSlip = true)
				#end
			#if( $history.groupType == "OCCURRENCE" )
			<td class="#if($firstDate)top_thick #end #if($firstSlip)top_medium #end right_thick" rowspan="$groupData.balanceChangeList.size()">
				<a href="../slip/$groupData.id">$groupData.description ($groupData.id)</a>
			</td>
			#end
			#end
			<td class="#if($firstDate)top_thick #end #if($firstSlip)top_medium #end">$changeData.accountName</td>			
			<td class="#if($firstDate)top_thick #end #if($firstSlip)top_medium #end">$changeData.change</td>
			<td class="#if($firstDate)top_thick #end #if($firstSlip)top_medium #end"><strong>$changeData.balance</strong></td>
		</tr>
			#end
		#end
	</tbody>
</table>
</body>
</html>